function displayComments(e){(new Posts).get("data.json").then((e=>{loadData(e)})).catch((e=>console.log(e)))}function loadData(e){const t=document.querySelector("#current-user__avatar"),n=(e.currentUser.image.png,e.currentUser.image.webp);t.setAttribute("src",n);const o=e.comments;for(let e=0;e!==o.length;e++){const t=o[e].user.image.webp,n=o[e].user.username,s=o[e].content,c=o[e].createdAt,r=o[e].score,a=o[e].id,l=o[e].replies,m=new Comment(t,n,c,s,r);if(m.showComment(),m.createReply(),0!==l.length)for(const e of l){const t=document.querySelector("#comments-section").getElementsByClassName("__comment-container"),n=t[a-1],o=document.createElement("div");o.setAttribute("class","comment-reply"),o.setAttribute("id","reply-section"),n.appendChild(o);const s=e.user.image.webp,c=e.user.username,r=e.content,l=e.createdAt,m=e.score,i=new Reply(s,c,l,r,m,t);i.showReply(),i.reply()}}}document.addEventListener("DOMContentLoaded",displayComments);class Comment{constructor(e,t,n,o,s,c){this.avatar=e,this.username=t,this.commentDate=n,this.comment=o,this.score=s,this.commentContainer=c}postComment(){return`\n            <div class="__comment-container">\n                <div class="__comment">\n                    <div class="__comment__info">\n                        <span class="__comment__avatar">\n                            <img src=${this.avatar} alt="User Avatar">\n                        </span>\n                        <span class="__comment__username">${this.username}</span>\n                        <span class="__comment__date">${this.commentDate}</span>\n                    </div>\n                    <p class="__comment__content">${this.comment}</p>\n                    \n                        <div class="__command__vote--btn --btn">\n                            <button class="up-vote vote--btn">\n                                <i class="fa-solid fa-plus"></i>\n                            </button>\n                            <span class="vote-count">${this.score}</span>\n                            <button class="down-vote vote--btn">\n                                <i class="fa-solid fa-minus"></i>\n                            </button>\n                        </div>\n                        <button class="__command__reply--btn reply--btn --btn">\n                            <i class="fa-solid fa-reply"></i>\n                            Reply\n                        </button>\n                   \n                </div>\n            </div>\n        `}showComment(){document.querySelector("#comments-section").innerHTML=displayComment(this.postComment())}createReply(){const e=document.querySelectorAll(".__command__reply--btn"),t=document.querySelector(".new-comment");document.querySelectorAll(".__comment-container");for(let n=0;n!==e.length;n++){function o(o){const s=t.cloneNode(!0);s.classList.add("replyBox"),s.style.marginLeft="auto",s.style.width="93%";const c=o.target.parentNode.parentNode;if(o.target===e[n]&&screen.width<=768)t.classList.toggle("reply-box");else if(o.target===e[n]&&screen.width>768){const e=document.querySelectorAll(".replyBox");try{c.insertBefore(s,c.children[1]),0!==e.length&&(console.log(e),e[n].remove())}catch(e){return}}}e[n].addEventListener("click",o)}window.addEventListener("scroll",(function(e){const n=document.documentElement.scrollHeight-window.innerHeight,o=window.scrollY;Math.ceil(o)===n&&t.classList.remove("reply-box")}))}}class Reply extends Comment{constructor(e,t,n,o,s,c){super(e,t,n,o,s,c)}showReply(){document.querySelector("#reply-section").innerHTML=displayReply(this.postComment())}reply(){this.createReply()}}const displayComment=function(e){let t="";return function(e){return t+=e}}(),displayReply=function(e){let t="";return function(e){return t+=e}}();